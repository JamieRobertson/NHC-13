!function($){function parentIfText(node){return"tagName"in node?node:node.parentNode}function swipeDirection(x1,x2,y1,y2){var xDelta=Math.abs(x1-x2),yDelta=Math.abs(y1-y2)
return xDelta>=yDelta?x1-x2>0?"Left":"Right":y1-y2>0?"Up":"Down"}function longTap(){longTapTimeout=null,touch.last&&(touch.el.trigger("longTap"),touch={})}function cancelLongTap(){longTapTimeout&&clearTimeout(longTapTimeout),longTapTimeout=null}function cancelAll(){touchTimeout&&clearTimeout(touchTimeout),tapTimeout&&clearTimeout(tapTimeout),swipeTimeout&&clearTimeout(swipeTimeout),longTapTimeout&&clearTimeout(longTapTimeout),touchTimeout=tapTimeout=swipeTimeout=longTapTimeout=null,touch={}}var touchTimeout,tapTimeout,swipeTimeout,longTapTimeout,touch={},longTapDelay=750
$(document).ready(function(){var now,delta
$(document.body).bind("touchstart",function(e){now=Date.now(),delta=now-(touch.last||now),touch.el=$(parentIfText(e.touches[0].target)),touchTimeout&&clearTimeout(touchTimeout),touch.x1=e.touches[0].pageX,touch.y1=e.touches[0].pageY,delta>0&&250>=delta&&(touch.isDoubleTap=!0),touch.last=now,longTapTimeout=setTimeout(longTap,longTapDelay)}).bind("touchmove",function(e){cancelLongTap(),touch.x2=e.touches[0].pageX,touch.y2=e.touches[0].pageY,Math.abs(touch.x1-touch.x2)>10&&e.preventDefault()}).bind("touchend",function(){cancelLongTap(),touch.x2&&Math.abs(touch.x1-touch.x2)>30||touch.y2&&Math.abs(touch.y1-touch.y2)>30?swipeTimeout=setTimeout(function(){touch.el.trigger("swipe"),touch.el.trigger("swipe"+swipeDirection(touch.x1,touch.x2,touch.y1,touch.y2)),touch={}},0):"last"in touch&&(tapTimeout=setTimeout(function(){var event=$.Event("tap")
event.cancelTouch=cancelAll,touch.el.trigger(event),touch.isDoubleTap?(touch.el.trigger("doubleTap"),touch={}):touchTimeout=setTimeout(function(){touchTimeout=null,touch.el.trigger("singleTap"),touch={}},250)},0))}).bind("touchcancel",cancelAll),$(window).bind("scroll",cancelAll)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(m){$.fn[m]=function(callback){return this.bind(m,callback)}})}(Zepto)
